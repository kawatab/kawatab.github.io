<!DOCTYPE html><html lang="en"><head><meta HTTP-EQUIV="Content-Type" CONTENT="text/html; CHARSET=utf-8" /><meta name="Author" content="Yasuhiro Yamakawa" /><title>Kawatab's tips/Debian</title><link rev="made" href="mailto:kawatab@yahoo.co.jp" /><link rel="stylesheet" href="base-style.css" type="text/css" /></head><header><h1>Kawatab's tips</h1><p>This is my tips for using and setting up Computer, mainly Linux. (English | <a href="debian-hu.html">Magyar</a> | <a href="debian-ja.html">日本語</a>)</p></header><section><h2>Debian</h2><ul class="tags"><li class="current-page">Debian</li><li><a href="emacs.html">Emacs</a></li><li><a href="fcitx.html">Fcitx</a></li><li><a href="kde.html">KDE</a></li><li><a href="mozc.html">Mozc</a></li><li><a href="network.html">Network</a></li><li><a href="vlc.html">VLC</a></li></ul></section><article><header><h3 id="2014102101">fcitxのアイコンをパネルに表示させる</h3><p class="modify-date"><time datetime="2014-10-21">2014-10-21</time></p></header><section><p>入力方法パネルのウィジェットをパネルに追加する。</p></section><footer><ul class="tags"><li><a href="kde.html">KDE</a></li><li class="current-page">Debian</li><li><a href="fcitx.html">Fcitx</a></li></ul></footer></article><article><header><h3 id="2014061401">Canonのaviからmp4に変換</h3><p class="modify-date"><time datetime="2014-06-14">2014-06-14</time></p></header><section><pre class="command"><code>$ a="MVI_0995"; vlc -I dummy -vvv "$a.AVI" --sout "#transcode{vcodec=h264,vb=1200,acodec=mp3,ab=128,channels=1,samplerate=11025}:standard{mux=mp4,dst="$a.mp4",access=file}" vlc://quit</code></pre></section><footer><ul class="tags"><li class="current-page">Debian</li><li><a href="vlc.html">VLC</a></li></ul></footer></article><article><header><h3 id="2014053101">Sogo</h3><p class="modify-date"><time datetime="2014-05-31">2014-05-31</time></p></header><section><h4>データベースの準備</h4><p>公式ガイドのp.28に従う。</p><pre class="command"><code>su - postgres
createuser --no-superuser --no-createdb --no-createrole --encrypted --pwprompt sogo</code></pre><p>(specify “sogo” as password)</p><pre class="command"><code>createdb -O sogo sogo</code></pre><h4>postgreSQLに接続する。</h4><pre class="command"><code>psql sogo</code></pre><p>DebianWikiの方法に従う。ただし、<code>sogo_users</code>ではなく<code>sogo_view</code>にする。</p><pre class="config"><code>CREATE TABLE sogo_view (c_uid VARCHAR(10) PRIMARY KEY, c_name VARCHAR(10), c_password VARCHAR(32), c_cn VARCHAR(128), mail VARCHAR(128));
INSERT INTO sogo_users VALUES ('paul', 'paul', MD5('zxc'), 'Paul Example', 'paul@example.com');</code></pre><h4>PostgreSQLでの権限追加</h4><pre class="command"><code>GRANT ALL PRIVILEGES ON sogo_users TO sogo</code></pre><P>公式ガイドのp.28に従う。</P><p><code>/var/lib/pgsql/data/pg_hba.conf</code></p><p>Debianの場合は<code>/etc/postgresql/9.1/main/pg_hba.conf</code></p><h4>SOGoの設定</h4><p>公式ガイドのp.31の設定。以下の設定を追加し、タイムゾーンなどをいじる。</p><pre class="config"><code>SOGoUserSources =
(
 {
  type = sql;
       id = directory;
       viewURL = "postgresql://sogo:sogo@127.0.0.1:5432/sogo/sogo_view";
       canAuthenticate = YES;
       isAddressBook = YES;
       userPasswordAlgorithm = md5;
       }
 );"))</code></pre><pre class="command"><code>$ cp /usr/share/doc/sogo/apache.conf /etc/apache2/conf.d/SOGo.conf
$ sudo vi /etc/apache2/conf.d/SOGo.conf</code></pre><p>ipアドレスを書き換え</p><pre class="config"><code>## adjust the following to your configuration
  RequestHeader set "x-webobjects-server-port" "443"
  RequestHeader set "x-webobjects-server-name" "192.168.0.119"
  RequestHeader set "x-webobjects-server-url" "https://192.168.0.119"</code></pre><pre class="command"><code>$ sudo service apache2 restart</code></pre><h4>SSLの設定</h4><p>標準的な方法</p><pre class="config"><code>&lt;Directory /usr/lib/GNUstep/SOGo&gt;
    Require all granted
    # Explicitly allow caching of static content to avoid browser specific behavior.
    # A resource's URL MUST change in order to have the client load the new version.
    &lt;IfModule expires_module&gt;
      ExpiresActive On
      ExpiresDefault "access plus 1 year"
    &lt;/IfModule&gt;
&lt;/Directory&gt;</code></pre></section><footer><ul class="tags"><li class="current-page">Debian</li></ul></footer></article><article><header><h3 id="2014052502">Kbackup</h3><p class="modify-date"><time datetime="2014-05-25">2014-05-25</time></p></header><section><p>シンプルなバックアップソフト</p></section><footer><ul class="tags"><li class="current-page">Debian</li><li><a href="kde.html">KDE</a></li></ul></footer></article><article><header><h3 id="2014052501">ssh</h3><p class="modify-date"><time datetime="2014-05-25">2014-05-25</time></p></header><section><h4>必要なパッケージ</h4><h5>サーバ</h5><p>openssh-server</p><h5>クライアント</h5><p>openssh-client</p><h4>サーバの設定</h4><h5>/etc/ssh/sshd_config</h5><p><code>/etc/ssh/sshd_config</code>に以下の変更を加える。</p><pre class="config"><code>Port 22                                     # ポート番号は適当に物に書き換える。
PermitRootLogin no                          #rootユーザはログインできないようにする。
AuthorizedKeyFile %h/.ssh/authorized_keys   #コメントを外す。
DenyUsers ALL                               #追加
Allowusers your_name                        #追加</code></pre><p>変更したら</p><pre class="command"><code># invoke-rc.d ssh restart</code></pre><p>を実行する。</p><h4>キーの作成</h4><pre class="command">$ ssh-keygen</pre><p>manには次のように書かれているので、オプションは要らない。</p><blockquote>ssh-keygen generates, manages and converts authentication keys for ssh(1).  ssh-keygen can create RSA keys for use by SSH protocol version 1 and DSA, ECDSA or RSA keys for use by SSH protocol version 2.  The type of key to be generated is specified with the -t option.  If invoked without any arguments, ssh-keygen will generate an RSA key for use in SSH protocol 2 connections.</blockquote><p>具体的には</p><pre class="command"><code>$ ssh-keygen
$ cat .ssh/id_rsa.pub &gt; .ssh/authorized_keys</code></pre><p>でOK。<code>ssh-keygen</code>の実行時には保存場所の確認とパスワードの入力が必要。公開鍵（id_rsa.pub）は<code>~/.ssh/authorized_keys</code>に書き込む。パーミッションは600。</p><h4>クライアントの設定</h4><p>秘密鍵（id_rsa）をネットワークを介さない方法でコピーする。</p><h5>Linuxからアクセスする場合</h5><pre class="command"><code>$ ssh -p [ポート番号] -i [秘密鍵] [ユーザ名]@[ipアドレス]</code></pre></section><footer><ul class="tags"><li class="current-page">Debian</li><li><a href="network.html">Network</a></li></ul></footer></article><article><header><h3 id="2014052401">back in time</h3><p class="modify-date"><time datetime="2014-05-24">2014-05-24</time></p></header><section><p>スナップショットを作るソフトウェア</p><p>同じボリューム内にはスナップショットを作れない。 </p></section><footer><ul class="tags"><li class="current-page">Debian</li></ul></footer></article><article><header><h3 id="2014020201">AltGrの利用</h3><p class="modify-date"><time datetime="2014-02-02">2014-02-02</time></p></header><section><ul><li><code>/usr/share/X11/xkb/symbols/pc</code></li><li><code>/usr/share/X11/xkb/symbols/us</code></li></ul><p>国際AltGr相当を書き換える。</p><p>ひらがな/カタカナトグルは単独ではひらがなキーとして、shiftと同時押しではカタカナキーとなる。 </p></section><footer><ul class="tags"><li class="current-page">Debian</li></ul></footer></article><article><header><h3 id="2014020101">Mozcの書き換え</h3><p class="modify-date"><time datetime="2014-02-01">2014-02-01</time></p></header><section><h4>ソースの取得</h4><pre class="command"><code>$ apt-get source mozc</code></pre><h4>依存ファイルの取得</h4><pre class="command"><code>$ apt-get build-dep mozc</code></pre><h4>deb作成</h4><pre class="command"><code>$ dpkg-buildpackage -r -uc -b</code></pre><h4>mozcかな入力設定関連ファイル</h4><table><tr><td><code>data/preedit/kana.tsv</code></td><td>濁音・半濁音テーブル</td></tr><tr><td><code>composer/table.cc</code></td><td>濁点・半濁点テーブルの位置を示す。</td></tr><tr><td><code>composer/internal/char-chunk.cc</code></td><td>未入力文字の処理</td></tr><tr><td><code>unix/ibus/key-translator.cc</code></td><td>iBus用のレイアウト</td></tr><tr><td><code>data/preedit/normalize_voiced_sound.tsv</code></td><td>「ゔ」の定義。ひらがなで打っても自動的にカタカナに変換される。</td></tr></table><h4>書き換え手順とインストール</h4><ol><li><code>unix/ibus/key_translator.cc</code>の<code>kana_map_US[]</code>の初期設定を変更する。</li><li><code>data/preedit/kana.tsv</code>を書き換える。</li><li>ビルドして、debを作る。</li><li>インストールする。</li><li><code>/usr/share/ibux/component/mozc/xml</code>の<code>layout</code>を<code>us</code>に書き換える。</li><li><code>mozc_engine.cc</code><code>のis_layout_jp関連</code></li></ol></section><footer><ul class="tags"><li class="current-page">Debian</li><li><a href="mozc.html">Mozc</a></li></ul></footer></article><article><header><h3 id="2013122101">clamav</h3><p class="modify-date"><time datetime="2013-12-21">2013-12-21</time></p></header><section><h4>コマンド</h4><h5>定義ファイルの更新。</h5><pre class="command"><code>$ freshclam</code></pre><h5>ディレクトリを指定してスキャン。</h5><pre class="command"><code>$ clamscan -r -i directory</code></pre></section><footer><ul class="tags"><li class="current-page">Debian</li></ul></footer></article><footer><a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a><address><a href="mailto:kawatab@yahoo.co.jp">Yasuhiro Yamakawa &lt;kawatab@yahoo.co.jp&gt;</a></address><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License.</a></footer></html>